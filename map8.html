<!DOCTYPE html>
<html lang="en">
<head>
    <title>Pacific Coast Scenic Byway</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="og:title" content="Scenic Byways in Western Oregon" />
    <meta property="og:url" content="http://cdn.rawgit.com/stribyw/WestOregonScenicByways/master/index.html" />
    <meta property="og:description" content="Routes and Details of Western Oregon's Scenic Byways" />
    <meta property="og:image" content="img/social.png" />

    <!--add required stylesheets-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />

    <!--facebook and info icons-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!--storymap stylesheet -->
    <link rel="stylesheet" href="css/storymap.css" />

    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="img/cascadiaFavicon.ico" type="image/x-icon">

    <!--add required libraries-->
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--I ADDED-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>

    <!--add ajax based data transmission-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>

    <!--storymap javascript library -->
    <script src="js/storymap.js"></script>

    <!-- bing map -->
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=Promise"></script>
    <script src="http://gmaclennan.github.io/leaflet-bing-layer/leaflet-bing-layer.js"></script>

    <!-- mini globle map -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.19/topojson.min.js"></script>
    <script src="js/globeminimap.js"></script>
</head>
<body>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12 col-md-12 main">
            <section data-scene="PacificCoastMap">
                <h2>Pacific Coast Scenic Byway</h2>
                <h4>Distance: 363 miles, Allow: 1 to 7 days</h4>
                <p>The byway begins in the northwest corner of Oregon in Astoria. Established in 1811, it’s the oldest immigrant settlement west of the Rockies, with its vital location where the mighty Columbia River meets the Pacific. Downtown Astoria offers seafood restaurants with views of passing ships, and just outside of it is Fort Stevens State Park that has a long sandbar that extends to where the Columbia and Pacific meet. Traveling south you’ll find family friendly Seaside with a boardwalk, and it’s artsy cousin Cannon Beach with galleries, boutiques, and views of the 235-foot Haystack Rock. In between lies Ecola State Park, where sandy coves, forested trails, and the cliff-edged cape of Tillamook Head. The byway winds past more cliffs and coves, climbing more than 700 feet above the Pacific, before descending around the rich estuary of Nehalem Bay. </p>
                <p>At Garibaldi the byway arcs inland, a hub for fishing and kayaking. In Tillamook, you’ll see the Tillamook Cheese Factory, where you can take a self-guided tour and sample cheese or have a meal. Head west on OR-131 for a detour to Three Capes Scenic Loop, then backtrack to Cape Lookout State Park. Further south is the massive sand dune of Cape Kiwanda in the little beach town of Pacific City. The route rejoins the byway north of Lincoln City, which draws skilled surfers to Nelscott Reef and hikers find solitude at the Cascade Head Preserve. At the fishing village of Depoe Bay is where fishing boats and whale-watching excursions thread through a rocky channel to the Pacific. Continuing south will be tide pools around Otter Rock, the collapsed sea cave called Devils Punchbowl, and Oregon’s tallest lighthouse at Yaquina Head Outstanding Natural Area. </p>
                <p>Newport sits on Yaquina Bay, just north of Nye Beach, where you’ll find shops, restaurants, and many opportunities to experience the beautiful bayfront and coastal views. Traveling south to Yachats, waves boom and swirl against the furrowed base of 800-foot Cape Perpetua Scenic Area. Twelve miles south is Oregon’s brightest beacon, Heceta Head Lighthouse. At nearby Sea Lion Caves, an elevator descends 208 feet to an observation area in a huge natural cavern. Next will be Florence, where the byway dips inland to meet the Siuslaw River. Across the river, the rugged coast transforms into high dunes and sandy beaches at the way to Coos Bay. There you’ll find the Oregon Coast’s largest city and the Oregon Dunes National Recreation Area, with dune-buggy tours, sandboarding, and ATV rentals. Coos Bay is also a busy port for recreational fishing, crabbing, and clamming. </p>
                <p>The byway next greets the coastline at Port Orford, a scenic fishing harbor, and at Port Orford Heads State Park you’ll find harbor seals and sea lions. At Gold Beach the Rogue River meets the Pacific. The coast dazzles on its final stretch, as the byway skims along cliffs and rocky shores dotted with tide pools. Beyond Pistol River is the Samuel H. Boardman State Scenic Corridor, which is 12 miles of coastline and a famous windsurfing spot. The byway concludes south of Brookings, a region known for the largest stand of coastal redwoods in the state. </p>
                <div class="button">
                  <button onclick="goBack()">Go Back</button>
                </div>
            </section>
        </div>

        <div id="map" class="col-sm-0 col-md-0 sidebar"></div>

    </div>
    <!--facebook icon-->
    <!--UPDATE href link below!-->
    <a class="fa fa-facebook-square btn" href="https://facebook.com/sharer.php?u=http://cdn.rawgit.com/stribyw/WestOregonScenicByways/master/index.html" target="_blank"></a>
    <!--info icon-->
    <i class="fa fa-info-circle btn" style="top:50px" data-toggle="modal" data-target="#info-modal"></i>

    <!--the info page-->
    <div class="modal fade" id="info-modal" role="dialog">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">About</h4>
                </div>
                <div class="modal-body">
                    <p>Scenic Byways of Western Oregon, GEOG371, Winter 2017, Final Project</p>
                    <p>Released Date: 03/19/2017 | Version: 1.0 | MIT License </p>
                    <p><b>Authors: Keith Striby, Bo Zhao</b> | College of Earth, Ocean, Atmospheric Science | Oregon State University </p>
                    <p>Page JavaScript, CSS, and HTML templates, and mini globe was provided by Bo Zhao.</p>
                    <p>Route and point data collection and customization, multiple baselayer control, zoom control positioning, route details, and other template modifications was by Keith Striby.</p>
                    <p>Context about Oregon Scenic Byways was summarized by Keith Striby and collected in March 2017 from the <a href="https://www.oregon.gov/ODOT/HWY/SCENICBYWAYS/pages/driving_guide.aspx" target="_blank">Oregon Scenic Byways Driving Guide</a>.</p>
                    <p>Flag icons were acquired from <a href="http://findicons.com/icon/28524/layers" target="_blank">findicons</a>.</p>
                    <p>The favicon image was acquired from <a href="http://www.crwflags.com/fotw/flags/us%7Dcasc.html" target="_blank">crwflags</a>.</p>
                    <p>This story map uses geospatial data from mapbox, Microsoft Bing map, Open Street Maps, and USGS.</p>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">

    function goBack() {
      window.history.back();
    }

    var PacificCoastMap_Legend ='<i style="background: blue; opacity: 0.5"></i><p><b>Pacific Coast Scenic Byway</b></p>';

    var layers = {
      'layer 1': [L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamFrb2J6aGFvIiwiYSI6ImNpcms2YWsyMzAwMmtmbG5icTFxZ3ZkdncifQ.P9MBej1xacybKcDN_jehvw', {
          id: 'mapbox.satellite'}),],
      'PacificCoast': [L.geoJson.ajax('assets/US101.geojson', {
          color: 'blue',
          weight: 5,
          opacity: 0.4}), PacificCoastMap_Legend]};

    var scenes = {
        PacificCoastMap: {lat: 44.207717, lng:  -125, zoom: 7, layers: ['layer 1', 'PacificCoast']}
    };

    $('.main').storymap({
        scenes: scenes,
        layers: layers,
        legend: true, // if you do not want a legend feature, you can simply not define the createLegend function.
        createMap: function () {
            // create a map in the "map" div, set the view to a given place and zoom
            var map = L.map('map', {zoomControl: true, scrollWheelZoom: false});

            var grayscale = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamFrb2J6aGFvIiwiYSI6ImNpcms2YWsyMzAwMmtmbG5icTFxZ3ZkdncifQ.P9MBej1xacybKcDN_jehvw', {
                  maxZoom: 18,
                  minZoom: 6,
                  attribution: '<a href="http://ceoas.oregonstate.edu/" target="_blank">Keith Striby</a>',
                  id: 'mapbox.light'}),
                streets = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
                  maxZoom: 18,
                  minZoom: 6,
                  id: 'mapbox.streets',
                  attribution: '<a href="http://ceoas.oregonstate.edu/" target="_blank">Keith Striby</a>'}),
                satellite = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamFrb2J6aGFvIiwiYSI6ImNpcms2YWsyMzAwMmtmbG5icTFxZ3ZkdncifQ.P9MBej1xacybKcDN_jehvw', {
                  maxZoom: 18,
                  minZoom: 6,
                  id: 'mapbox.satellite',
                  attribution: '<a href="http://ceoas.oregonstate.edu/" target="_blank">Keith Striby</a>'});

             var baseLayers = {
           		"Grayscale": grayscale,
              "Streets": streets,
              "Satellite": satellite
           	};

            L.control.layers(baseLayers).addTo(map);
            L.control.scale({position: 'bottomright', metric: false}).addTo(map);

            //create a mini globe as the overview map control.
            var miniMap = new L.Control.GlobeMiniMap({
                marker:'red',
                position: 'bottomright'
            }).addTo(map);

            // Create additional Control placeholders to reposition zoom control
            function addControlPlaceholders(map) {
              var corners = map._controlCorners,
                l = 'leaflet-',
                container = map._controlContainer;

                function createCorner(vSide, hSide) {
                  var className = l + vSide + ' ' + l + hSide;

                  corners[vSide + hSide] = L.DomUtil.create('div', className, container);
                }

                createCorner('verticalcenter', 'left');
                createCorner('verticalcenter', 'right');
            }
            addControlPlaceholders(map);

            // Change the position of the Zoom Control to a newly created placeholder.
            map.zoomControl.setPosition('verticalcenterright');

            var flagicon = L.Icon.extend({
                options:{
                    iconSize: [70,70],
                    iconAnchor: [30, 60],
                    popupAnchor: [2, -30]
                }
            });

            var start = new flagicon ({iconUrl: 'img/flag1rightgreen.png'});
            var finish = new flagicon ({iconUrl: 'img/flag2leftred.png'});
            var points = null;

            $.getJSON("assets/US101Points.geojson", function(data){
              points = L.geoJson(data,{
                onEachFeature: function (feature, layer){
                  layer.bindPopup(feature.properties.F1);
                }, pointToLayer: function (feature, latlng){
                  var marker = null;
                  if (feature.properties.F1 == "Start"){
                    marker = L.marker(latlng,{icon: start});
                  }else{
                    marker = L.marker(latlng,{icon: finish});
                  }
                  return marker;
                }
              }).addTo(map);
            });
            return map;
        }
    });
</script>
</body>
</html>
